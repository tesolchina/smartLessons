<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Listening Practice Game - Academic English</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .game-area {
            padding: 40px;
        }

        .technique-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .technique-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .technique-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border-color: #4facfe;
        }

        .technique-card.active {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border-color: #4facfe;
        }

        .technique-card h3 {
            font-size: 1.3em;
            margin-bottom: 10px;
        }

        .technique-card p {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .audio-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
        }

        .audio-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
        }

        .play-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .play-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .play-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            width: 0%;
            transition: width 0.1s ease;
        }

        .task-section {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .task-section h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.4em;
        }

        .question {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .question h4 {
            color: #495057;
            margin-bottom: 15px;
        }

        .options {
            display: grid;
            gap: 10px;
        }

        .option {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option:hover {
            border-color: #4facfe;
            background: #f0f8ff;
        }

        .option.selected {
            border-color: #4facfe;
            background: #e3f2fd;
        }

        .option.correct {
            border-color: #28a745;
            background: #d4edda;
        }

        .option.incorrect {
            border-color: #dc3545;
            background: #f8d7da;
        }

        .submit-btn {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1em;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .submit-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .score-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
        }

        .score-display {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .feedback {
            background: #e3f2fd;
            border: 2px solid #4facfe;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            display: none;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
        }

        .feedback.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }

        .hidden {
            display: none;
        }

        .loading {
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #4facfe;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéß Listening Practice Game</h1>
            <p>Master Academic Listening Techniques with Interactive Exercises</p>
        </div>

        <div class="game-area">
            <!-- Technique Selection -->
            <div class="technique-selector">
                <div class="technique-card" data-technique="main-idea">
                    <h3>üéØ Main Idea</h3>
                    <p>Identify the central theme and key concepts</p>
                </div>
                <div class="technique-card" data-technique="signal-words">
                    <h3>üîó Signal Words</h3>
                    <p>Recognize transition markers and discourse markers</p>
                </div>
                <div class="technique-card" data-technique="details">
                    <h3>üìä Details</h3>
                    <p>Listen for specific information and statistics</p>
                </div>
                <div class="technique-card" data-technique="inference">
                    <h3>üß† Inference</h3>
                    <p>Draw conclusions from implied information</p>
                </div>
                <div class="technique-card" data-technique="paraphrasing">
                    <h3>üîÑ Paraphrasing</h3>
                    <p>Recognize when ideas are restated differently</p>
                </div>
            </div>

            <!-- Audio Section -->
            <div class="audio-section">
                <h3>üéµ Listen to the Audio</h3>
                <div class="audio-controls">
                    <button class="play-btn" id="playBtn">‚ñ∂Ô∏è Play Audio</button>
                    <button class="play-btn" id="pauseBtn" disabled>‚è∏Ô∏è Pause</button>
                    <button class="play-btn" id="replayBtn" disabled>üîÑ Replay</button>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <audio id="audioPlayer" preload="auto"></audio>
            </div>

            <!-- Task Section -->
            <div class="task-section" id="taskSection">
                <h3>üìù Complete the Task</h3>
                <div id="taskContent">
                    <p>Select a listening technique above to begin your practice!</p>
                </div>
            </div>

            <!-- Feedback Section -->
            <div class="feedback" id="feedback">
                <h4>Feedback</h4>
                <p id="feedbackText"></p>
            </div>

            <!-- Score Section -->
            <div class="score-section">
                <div class="score-display">Score: <span id="score">0</span>/<span id="totalQuestions">0</span></div>
                <p>Keep practicing to improve your listening skills!</p>
                <button class="play-btn" id="generateReportBtn" onclick="game.generateReport()" style="margin-top: 20px; background: linear-gradient(135deg, #28a745 0%, #20c997 100%);">
                    üìä Generate Report
                </button>
            </div>
        </div>
    </div>

    <script>
        class ListeningGame {
            constructor() {
                this.currentTechnique = null;
                this.score = 0;
                this.totalQuestions = 0;
                this.currentQuestion = 0;
                this.audioPlayer = document.getElementById('audioPlayer');
                this.playBtn = document.getElementById('playBtn');
                this.pauseBtn = document.getElementById('pauseBtn');
                this.replayBtn = document.getElementById('replayBtn');
                this.progressFill = document.getElementById('progressFill');
                this.taskSection = document.getElementById('taskSection');
                this.feedback = document.getElementById('feedback');
                this.scoreDisplay = document.getElementById('score');
                this.totalQuestionsDisplay = document.getElementById('totalQuestions');
                
                this.initializeGame();
            }

            initializeGame() {
                // Technique selection
                document.querySelectorAll('.technique-card').forEach(card => {
                    card.addEventListener('click', (e) => {
                        this.selectTechnique(e.target.closest('.technique-card').dataset.technique);
                    });
                });

                // Audio controls
                this.playBtn.addEventListener('click', () => this.playAudio());
                this.pauseBtn.addEventListener('click', () => this.pauseAudio());
                this.replayBtn.addEventListener('click', () => this.replayAudio());

                // Audio events
                this.audioPlayer.addEventListener('timeupdate', () => this.updateProgress());
                this.audioPlayer.addEventListener('ended', () => this.onAudioEnded());
            }

            selectTechnique(technique) {
                // Remove active class from all cards
                document.querySelectorAll('.technique-card').forEach(card => {
                    card.classList.remove('active');
                });

                // Add active class to selected card
                document.querySelector(`[data-technique="${technique}"]`).classList.add('active');

                this.currentTechnique = technique;
                this.loadTechniqueContent(technique);
            }

            loadTechniqueContent(technique) {
                const content = this.getTechniqueContent(technique);
                this.taskSection.innerHTML = content;
                this.loadAudio(technique);
            }

            getTechniqueContent(technique) {
                const contents = {
                    'main-idea': {
                        question: `
                            <div class="question">
                                <h4>What is the main idea of the audio?</h4>
                                <div class="options">
                                    <div class="option" data-answer="A">A) Global citizenship requires understanding diverse cultures</div>
                                    <div class="option" data-answer="B">B) Technology is the solution to world problems</div>
                                    <div class="option" data-answer="C">C) Education is only important in developed countries</div>
                                    <div class="option" data-answer="D">D) Climate change affects only certain regions</div>
                                </div>
                            </div>
                            <button class="submit-btn" onclick="game.submitAnswer('A')">Submit Answer</button>
                        `,
                        transcript: "Global citizenship involves embracing diverse identities and cultures. It requires understanding our shared humanity and working together for a more peaceful world.",
                        highlight: "Global citizenship involves embracing diverse identities and cultures",
                        explanation: "The main idea is stated directly in the first sentence. Look for the central concept that the entire passage is about."
                    },
                    'signal-words': {
                        question: `
                            <div class="question">
                                <h4>Which signal word indicates the first step in the process?</h4>
                                <div class="options">
                                    <div class="option" data-answer="A">A) First</div>
                                    <div class="option" data-answer="B">B) Next</div>
                                    <div class="option" data-answer="C">C) Finally</div>
                                    <div class="option" data-answer="D">D) However</div>
                                </div>
                            </div>
                            <button class="submit-btn" onclick="game.submitAnswer('A')">Submit Answer</button>
                        `,
                        transcript: "First, we need to understand the problem. Next, we should consider possible solutions. Finally, we must take action to create positive change.",
                        highlight: "First, we need to understand the problem",
                        explanation: "Signal words like 'First', 'Next', 'Finally' help organize information and show the sequence of ideas."
                    },
                    'details': {
                        question: `
                            <div class="question">
                                <h4>What specific number was mentioned?</h4>
                                <div class="options">
                                    <div class="option" data-answer="A">A) 2.5 billion</div>
                                    <div class="option" data-answer="B">B) 40 percent</div>
                                    <div class="option" data-answer="C">C) 100 million</div>
                                    <div class="option" data-answer="D">D) 75 percent</div>
                                </div>
                            </div>
                            <button class="submit-btn" onclick="game.submitAnswer('A')">Submit Answer</button>
                        `,
                        transcript: "The United Nations reports that 2.5 billion people lack access to clean water. This affects 40 percent of the global population, particularly in developing countries.",
                        highlight: "2.5 billion people lack access to clean water",
                        explanation: "Specific numbers and statistics are key details. Listen carefully for exact figures and percentages."
                    },
                    'inference': {
                        question: `
                            <div class="question">
                                <h4>What can you infer from the audio?</h4>
                                <div class="options">
                                    <div class="option" data-answer="A">A) The speaker believes individual action is important</div>
                                    <div class="option" data-answer="B">B) Technology alone can solve global problems</div>
                                    <div class="option" data-answer="C">C) Only governments can create change</div>
                                    <div class="option" data-answer="D">D) Education is not necessary for progress</div>
                                </div>
                            </div>
                            <button class="submit-btn" onclick="game.submitAnswer('A')">Submit Answer</button>
                        `,
                        transcript: "The speaker mentioned that climate change affects everyone, but did not specify which countries are most vulnerable to rising sea levels.",
                        highlight: "climate change affects everyone",
                        explanation: "Inference means drawing conclusions from what is implied but not directly stated. Look for underlying meanings."
                    },
                    'paraphrasing': {
                        question: `
                            <div class="question">
                                <h4>Which phrase is a paraphrase of "protecting our planet for future generations"?</h4>
                                <div class="options">
                                    <div class="option" data-answer="A">A) Ensuring our actions today do not harm tomorrow's world</div>
                                    <div class="option" data-answer="B">B) Creating jobs while reducing pollution</div>
                                    <div class="option" data-answer="C">C) Understanding our shared humanity</div>
                                    <div class="option" data-answer="D">D) Working together for a peaceful world</div>
                                </div>
                            </div>
                            <button class="submit-btn" onclick="game.submitAnswer('A')">Submit Answer</button>
                        `,
                        transcript: "Environmental sustainability means protecting our planet for future generations. In other words, we must ensure that our actions today do not harm tomorrow's world.",
                        highlight: "protecting our planet for future generations... we must ensure that our actions today do not harm tomorrow's world",
                        explanation: "Paraphrasing restates the same idea using different words. Look for phrases that mean the same thing but are expressed differently."
                    }
                };

                const content = contents[technique];
                if (content) {
                    this.currentTechniqueData = content;
                    return content.question;
                }
                return '<p>Content not available for this technique.</p>';
            }

            loadAudio(technique) {
                const audioFiles = {
                    'main-idea': 'listening_game_audio/technique_1_main_idea.mp3',
                    'signal-words': 'listening_game_audio/technique_2_signal_words.mp3',
                    'details': 'listening_game_audio/technique_3_details.mp3',
                    'inference': 'listening_game_audio/technique_4_inference.mp3',
                    'paraphrasing': 'listening_game_audio/technique_5_paraphrasing.mp3'
                };

                this.audioPlayer.src = audioFiles[technique];
                this.playBtn.disabled = false;
                this.pauseBtn.disabled = true;
                this.replayBtn.disabled = true;
            }

            playAudio() {
                this.audioPlayer.play();
                this.playBtn.disabled = true;
                this.pauseBtn.disabled = false;
                this.replayBtn.disabled = false;
            }

            pauseAudio() {
                this.audioPlayer.pause();
                this.playBtn.disabled = false;
                this.pauseBtn.disabled = true;
            }

            replayAudio() {
                this.audioPlayer.currentTime = 0;
                this.audioPlayer.play();
                this.playBtn.disabled = true;
                this.pauseBtn.disabled = false;
            }

            updateProgress() {
                const progress = (this.audioPlayer.currentTime / this.audioPlayer.duration) * 100;
                this.progressFill.style.width = progress + '%';
            }

            onAudioEnded() {
                this.playBtn.disabled = false;
                this.pauseBtn.disabled = true;
                this.replayBtn.disabled = false;
            }

            submitAnswer(correctAnswer) {
                const selectedOptions = document.querySelectorAll('.option.selected');
                const selectedAnswer = selectedOptions[0]?.dataset.answer;
                const isCorrect = selectedAnswer === correctAnswer;

                // Show feedback
                this.showFeedback(isCorrect, correctAnswer);

                // Show transcript with highlighted key information
                this.showTranscript();

                // Update score
                if (isCorrect) {
                    this.score++;
                }
                this.totalQuestions++;
                this.updateScore();

                // Record the attempt
                this.recordAttempt(this.currentTechnique, selectedAnswer, correctAnswer, isCorrect);

                // Disable further interaction
                document.querySelectorAll('.option').forEach(option => {
                    option.style.pointerEvents = 'none';
                });
                document.querySelector('.submit-btn').disabled = true;
            }

            showFeedback(isCorrect, correctAnswer) {
                const feedbackText = document.getElementById('feedbackText');
                
                if (isCorrect) {
                    this.feedback.className = 'feedback show correct';
                    feedbackText.textContent = 'üéâ Correct! Well done! You successfully identified the key information.';
                } else {
                    this.feedback.className = 'feedback show incorrect';
                    feedbackText.textContent = `‚ùå Not quite right. The correct answer was: ${Array.isArray(correctAnswer) ? correctAnswer.join(', ') : correctAnswer}`;
                }
            }

            updateScore() {
                this.scoreDisplay.textContent = this.score;
                this.totalQuestionsDisplay.textContent = this.totalQuestions;
            }

            showTranscript() {
                if (!this.currentTechniqueData) return;

                const transcriptSection = document.createElement('div');
                transcriptSection.className = 'transcript-section';
                transcriptSection.innerHTML = `
                    <div class="transcript-content">
                        <h4>üìù Transcript with Key Information Highlighted</h4>
                        <div class="transcript-text">
                            ${this.highlightText(this.currentTechniqueData.transcript, this.currentTechniqueData.highlight)}
                        </div>
                        <div class="technique-explanation">
                            <h5>üí° Technique Explanation:</h5>
                            <p>${this.currentTechniqueData.explanation}</p>
                        </div>
                    </div>
                `;

                // Add styles for transcript
                const style = document.createElement('style');
                style.textContent = `
                    .transcript-section {
                        background: #f8f9fa;
                        border: 2px solid #4facfe;
                        border-radius: 15px;
                        padding: 25px;
                        margin: 20px 0;
                    }
                    .transcript-text {
                        background: white;
                        padding: 20px;
                        border-radius: 10px;
                        margin: 15px 0;
                        line-height: 1.6;
                        font-size: 1.1em;
                    }
                    .highlighted {
                        background: #ffeb3b;
                        padding: 2px 4px;
                        border-radius: 3px;
                        font-weight: bold;
                    }
                    .technique-explanation {
                        background: #e3f2fd;
                        padding: 15px;
                        border-radius: 10px;
                        margin-top: 15px;
                    }
                    .technique-explanation h5 {
                        color: #1976d2;
                        margin-bottom: 10px;
                    }
                `;
                document.head.appendChild(style);

                this.taskSection.appendChild(transcriptSection);
            }

            highlightText(text, highlight) {
                if (!highlight) return text;
                return text.replace(new RegExp(`(${highlight})`, 'gi'), '<span class="highlighted">$1</span>');
            }

            recordAttempt(technique, selectedAnswer, correctAnswer, isCorrect) {
                if (!this.attempts) {
                    this.attempts = [];
                }
                
                this.attempts.push({
                    technique: technique,
                    selectedAnswer: selectedAnswer,
                    correctAnswer: correctAnswer,
                    isCorrect: isCorrect,
                    timestamp: new Date().toISOString()
                });
            }

            generateReport() {
                const report = {
                    studentName: prompt("Please enter your name:") || "Anonymous Student",
                    date: new Date().toLocaleDateString(),
                    time: new Date().toLocaleTimeString(),
                    totalQuestions: this.totalQuestions,
                    correctAnswers: this.score,
                    percentage: this.totalQuestions > 0 ? Math.round((this.score / this.totalQuestions) * 100) : 0,
                    attempts: this.attempts || [],
                    techniques: this.getTechniqueNames()
                };

                const reportText = this.formatReport(report);
                
                // Create and download report file
                const blob = new Blob([reportText], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `listening_practice_report_${report.studentName.replace(/\s+/g, '_')}_${new Date().toISOString().split('T')[0]}.txt`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                // Show WhatsApp message
                this.showWhatsAppMessage(report);
            }

            formatReport(report) {
                let reportText = `LISTENING PRACTICE GAME - STUDENT REPORT\n`;
                reportText += `==========================================\n\n`;
                reportText += `Student Name: ${report.studentName}\n`;
                reportText += `Date: ${report.date}\n`;
                reportText += `Time: ${report.time}\n\n`;
                reportText += `OVERALL PERFORMANCE\n`;
                reportText += `------------------\n`;
                reportText += `Total Questions: ${report.totalQuestions}\n`;
                reportText += `Correct Answers: ${report.correctAnswers}\n`;
                reportText += `Percentage: ${report.percentage}%\n\n`;
                
                if (report.attempts.length > 0) {
                    reportText += `DETAILED RESULTS\n`;
                    reportText += `----------------\n`;
                    report.attempts.forEach((attempt, index) => {
                        reportText += `${index + 1}. ${attempt.technique.toUpperCase()}\n`;
                        reportText += `   Your Answer: ${attempt.selectedAnswer}\n`;
                        reportText += `   Correct Answer: ${attempt.correctAnswer}\n`;
                        reportText += `   Result: ${attempt.isCorrect ? 'CORRECT' : 'INCORRECT'}\n\n`;
                    });
                }

                reportText += `TECHNIQUES PRACTICED\n`;
                reportText += `-------------------\n`;
                report.techniques.forEach(technique => {
                    reportText += `‚Ä¢ ${technique}\n`;
                });

                reportText += `\nRECOMMENDATIONS\n`;
                reportText += `---------------\n`;
                if (report.percentage >= 80) {
                    reportText += `Excellent work! You have strong listening skills. Continue practicing to maintain your level.\n`;
                } else if (report.percentage >= 60) {
                    reportText += `Good progress! Focus on the techniques where you had difficulty. Practice more to improve.\n`;
                } else {
                    reportText += `Keep practicing! Review the technique explanations and try the exercises again.\n`;
                }

                reportText += `\nGenerated by Listening Practice Game\n`;
                reportText += `Date: ${new Date().toLocaleString()}\n`;

                return reportText;
            }

            getTechniqueNames() {
                const techniqueNames = {
                    'main-idea': 'Main Idea Identification',
                    'signal-words': 'Signal Word Recognition',
                    'details': 'Detail Recognition',
                    'inference': 'Inference Skills',
                    'paraphrasing': 'Paraphrasing Recognition'
                };
                return Object.values(techniqueNames);
            }

            showWhatsAppMessage(report) {
                const message = `üéß *Listening Practice Game Report*\n\n` +
                    `Student: ${report.studentName}\n` +
                    `Score: ${report.correctAnswers}/${report.totalQuestions} (${report.percentage}%)\n` +
                    `Date: ${report.date}\n\n` +
                    `Please send this report to Simon via WhatsApp!`;

                const whatsappSection = document.createElement('div');
                whatsappSection.className = 'whatsapp-message';
                whatsappSection.innerHTML = `
                    <div class="whatsapp-content">
                        <h4>üì± Send Report to Simon</h4>
                        <div class="message-box">
                            <textarea readonly>${message}</textarea>
                            <button onclick="navigator.clipboard.writeText(this.previousElementSibling.value); alert('Message copied to clipboard! You can now paste it in WhatsApp.')">Copy Message</button>
                        </div>
                        <p><strong>Instructions:</strong> Copy the message above and send it to Simon via WhatsApp with your report file.</p>
                    </div>
                `;

                // Add styles for WhatsApp message
                const style = document.createElement('style');
                style.textContent += `
                    .whatsapp-message {
                        background: #25d366;
                        color: white;
                        padding: 25px;
                        border-radius: 15px;
                        margin: 20px 0;
                    }
                    .whatsapp-content h4 {
                        margin-bottom: 15px;
                    }
                    .message-box {
                        background: white;
                        border-radius: 10px;
                        padding: 15px;
                        margin: 15px 0;
                    }
                    .message-box textarea {
                        width: 100%;
                        height: 120px;
                        border: none;
                        resize: none;
                        font-family: inherit;
                        font-size: 14px;
                        color: #333;
                    }
                    .message-box button {
                        background: #25d366;
                        color: white;
                        border: none;
                        padding: 10px 20px;
                        border-radius: 5px;
                        cursor: pointer;
                        margin-top: 10px;
                    }
                    .message-box button:hover {
                        background: #128c7e;
                    }
                `;
                document.head.appendChild(style);

                this.taskSection.appendChild(whatsappSection);
            }
        }

        // Initialize the game when the page loads
        let game;
        document.addEventListener('DOMContentLoaded', () => {
            game = new ListeningGame();
        });

        // Add click handlers for options
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('option')) {
                // Remove selected class from all options
                document.querySelectorAll('.option').forEach(option => {
                    option.classList.remove('selected');
                });
                
                // Add selected class to clicked option
                e.target.classList.add('selected');
            }
        });
    </script>
</body>
</html>
